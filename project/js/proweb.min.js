// Utilities
const qs=(s,r=document)=>r.querySelector(s),qsa=(s,r=document)=>Array.from(r.querySelectorAll(s));qs('#year').textContent=new Date().getFullYear();qsa('a[href^="#"]').forEach(a=>{a.addEventListener('click',e=>{const id=a.getAttribute('href');if(!id||id==='#')return;const el=qs(id);if(!el)return;e.preventDefault();el.scrollIntoView({behavior:'smooth',block:'start'});});});const burger=qs('.burger'),mobileMenu=qs('#mobileMenu');if(burger&&mobileMenu){burger.addEventListener('click',()=>{const open=mobileMenu.classList.toggle('open');burger.setAttribute('aria-expanded',String(open));});qsa('.mobile-menu__link',mobileMenu).forEach(link=>link.addEventListener('click',()=>mobileMenu.classList.remove('open')));}const bars=qsa('.action-bar');let lastY=window.scrollY;const onScroll=()=>{const y=window.scrollY,show=y>300;bars.forEach(b=>{b.hidden=!show;if(show)b.classList.add('visible');});lastY=y;};window.addEventListener('scroll',onScroll,{passive:!0});onScroll();const topBtn=qs('[data-scroll-top]');topBtn&&topBtn.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));function startCountdown(root,targetDate){const daysEl=qs('[data-days]',root),hoursEl=qs('[data-hours]',root),minsEl=qs('[data-minutes]',root),secsEl=qs('[data-seconds]',root),pad=n=>String(n).padStart(2,'0');function tick(){const now=new Date,diff=targetDate-now;if(diff<=0){daysEl.textContent=hoursEl.textContent=minsEl.textContent=secsEl.textContent='00';clearInterval(intId);return}const d=Math.floor(diff/864e5),h=Math.floor(diff/36e5%24),m=Math.floor(diff/6e4%60),s=Math.floor(diff/1e3%60);daysEl.textContent=pad(d);hoursEl.textContent=pad(h);minsEl.textContent=pad(m);secsEl.textContent=pad(s);const mini=qs('#miniTimer');mini&&(mini.textContent=`${pad(h+d*24)}:${pad(m)}:${pad(s)}`)}tick();const intId=setInterval(tick,1e3)}qsa('.countdown-timer').forEach(timer=>{const targetAttr=timer.getAttribute('data-target'),target=targetAttr?new Date(targetAttr):new Date(Date.now()+18e6+72e4+15e3);startCountdown(timer,target)});qsa('[data-accordion]').forEach(acc=>{qsa('.accordion__item',acc).forEach(item=>{const header=qs('.accordion__header',item);header.addEventListener('click',()=>{const open=item.getAttribute('data-open')==='true';qsa('.accordion__item',acc).forEach(i=>i.setAttribute('data-open','false'));if(!open)item.setAttribute('data-open','true');header.setAttribute('aria-expanded',String(!open));});});});


